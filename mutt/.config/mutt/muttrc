# vim: filetype=neomuttrc
source /usr/share/mutt-wizard/mutt-wizard.muttrc
source /home/philipp/.config/mutt/accounts/philipp.muttrc
macro index,pager i1 '<sync-mailbox><enter-command>source /home/philipp/.config/mutt/accounts/philipp.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to philipp@thaler.fyi"
macro index,pager i2 '<sync-mailbox><enter-command>source /home/philipp/.config/mutt/accounts/postmaster.muttrc<enter><change-folder>!<enter>;<check-stats>' "switch to postmaster@thaler.fyi"

set query_command = "echo '' && notmuch address from:/%s/"
# set query_command = "khard email --parsable --search-in-source-files '%s'"
set abort_noattach = yes
set abort_noattach_regex = "\\<(anh채ngen|angeh채ngt|anhang|anh채nge|h채ngt an|attach(|ed|ments?))\\>"
set date_format="%Y-%m-%d %H:%M"
set attach_save_dir="~/attachments/"

bind attach <return> view-mailcap
set display_filter = "tac | sed '/\\\[-- Autoview/,+1d' | tac" # Suppress autoview messages.
alternative_order text/plain text/enriched text/html
#scroll inside the message rather than the index
bind pager <up> previous-line
bind pager <down> next-line

macro index O "<shell-escape>mailsync<enter>" "sync all mail"

macro index,pager a "<enter-command>set my_pipe_decode=\$pipe_decode pipe_decode<return><pipe-message>khard add-email<return><enter-command>set pipe_decode=\$my_pipe_decode; unset my_pipe_decode<return>"

macro index,pager \cb "<pipe-message> urlscan<Enter>" "call urlscan to extract URLs out of a message"
macro attach,compose \cb "<pipe-entry> urlscan<Enter>" "call urlscan to extract URLs out of a message"

macro index A \
    "<tag-pattern>~N<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" \
    "mark all new as read"

# THEME
color normal		  default default         # Text is "Text"
color index		    color2 default ~N       # New Messages are Green
color index		    color1 default ~F       # Flagged messages are Red
color index		    color13 default ~T      # Tagged Messages are Red
color index		    color1 default ~D       # Messages to delete are Red
color attachment	color5 default          # Attachments are Pink
color signature	  color8 default          # Signatures are Surface 2
color search		  color4 default          # Highlighted results are Blue

color indicator		default color8          # currently highlighted message Surface 2=Background Text=Foreground
color error		    color1 default          # error messages are Red
color status		  color15 default         # status line "Subtext 0"
color tree        color15 default         # thread tree arrows Subtext 0
color tilde       color15 default         # blank line padding Subtext 0

color hdrdefault  color13 default         # default headers Pink
color header		  color13 default "^From:"
color header	 	  color13 default "^Subject:"

color quoted		  color15 default         # Subtext 0
color quoted1		  color7 default          # Subtext 1
color quoted2		  color8 default          # Surface 2
color quoted3		  color0 default          # Surface 1
color quoted4		  color0 default
color quoted5		  color0 default

color body		color2 default		[\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+               # email addresses Green
color body	  color2 default		(https?|ftp)://[\-\.,/%~_:?&=\#a-zA-Z0-9]+        # URLs Green
color body		color4 default		(^|[[:space:]])\\*[^[:space:]]+\\*([[:space:]]|$) # *bold* text Blue
color body		color4 default		(^|[[:space:]])_[^[:space:]]+_([[:space:]]|$)     # _underlined_ text Blue
color body		color4 default		(^|[[:space:]])/[^[:space:]]+/([[:space:]]|$)     # /italic/ text Blue

color sidebar_flagged   color1 default    # Mailboxes with flagged mails are Red
color sidebar_new       color10 default   # Mailboxes with new mail are Green
